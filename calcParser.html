<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script type="text/javascript">
		var test = '2*1000+6+26-8+6*2-1*1000/2-1*1536';
		var testArr = test.split(/([\+\-\*\/])/g);
		var operators = ['+', '-', '*', '/'];
		//var tokens = [];
	
		/*function Token(kind, value) {
			this.kind = kind;
			this.value = value;
		}*/

		/*testArr.forEach(function(element){
			if(operators.indexOf(element) !== -1){
				tokens.push(new Token(element));
			} else {tokens.push(new Token(8,element));}
		})*/

		console.log(testArr)

		function expression (){
			var left = term();
			var token = getNextToken();
			while(true){
				console.log(token);
				switch (token){
					case '+': {
						console.log('plus');
						var d = term();
						left = parseFloat(left) + parseFloat(d);
						token = getNextToken();
						break;
					}
					case '-': {
						console.log('minus');
						var d = term();
						left = parseFloat(left) - parseFloat(d);;
						token = getNextToken();
						break;
					}
					default: {
						console.log('ni plus ni minus')
						counter.decrement();
						return left;
					}
				}
			}
		} 


		function term(){
			var left = primary();
			var token = getNextToken();
		
			while(true){
				switch(token){
					case '*': {
						console.log('*')
						var d = primary();
						left = parseFloat(left) * parseFloat(d);
						token = getNextToken();
						break;
					}
					case '/': {
						console.log('/')
						var d = primary();
						left = parseFloat(left) / parseFloat(d);;
						token = getNextToken();
						break;
					}
					default: {
						console.log('nije */')
						counter.decrement();
						return left;
					}
				}

			}
		}

		function primary()
		{
			var token = getNextToken();
			switch (true) {
				case '(' :  
				{ 
					var d = expression();
					var nextToken = getNextToken();
					return d;
				}
				case (parseInt(token) < Math.pow(10, 1000)) : {
					console.log('brojka');
					return token;
				}
				default: {
					console.log('nije brojka')
					return token;
				}
			}
		}

		var counter = (function() {
			var privateCounter = 0;
			function changeBy(val) {
				privateCounter += val;
			}
			return {
				increment: function() {changeBy(1);},
				decrement: function() {changeBy(-1);},
				value: function() {return privateCounter;}
			}
		})();

		function getNextToken(){
		  	var currentMemeber = counter.value();
		  	counter.increment();
		  	return testArr[currentMemeber];
		 }

		console.log(expression())
</script>
</head>
<body>

</body>
</html>